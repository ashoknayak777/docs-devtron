"use strict";(self.webpackChunkdocdevtron=self.webpackChunkdocdevtron||[]).push([[2414],{1323:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"user-guide/global-configurations/scoped-variables","title":"Using Scoped Variables in Devtron","description":"Introduction","source":"@site/docs/user-guide/global-configurations/scoped-variables.md","sourceDirName":"user-guide/global-configurations","slug":"/user-guide/global-configurations/scoped-variables","permalink":"/docs/user-guide/global-configurations/scoped-variables","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Manage Notifications","permalink":"/docs/user-guide/global-configurations/manage-notification"},"next":{"title":"Build Infra","permalink":"/docs/user-guide/global-configurations/build-infra"}}');var s=n(4848),l=n(8453);const r={},a="Using Scoped Variables in Devtron",o={},d=[{value:"Introduction",id:"introduction",level:2},{value:"Precedence of Scoped Variables",id:"precedence-of-scoped-variables",level:3},{value:"Advantages of using scoped variables",id:"advantages-of-using-scoped-variables",level:3},{value:"How to Define a Scoped Variable",id:"how-to-define-a-scoped-variable",level:2},{value:"Download the Template",id:"download-the-template",level:3},{value:"Enter the Values",id:"enter-the-values",level:3},{value:"Upload the Template",id:"upload-the-template",level:3},{value:"Defining YAML values in scoped variables <a></a>",id:"defining-yaml-values-in-scoped-variables-",level:2},{value:"How to Edit an Existing Scoped Variable",id:"how-to-edit-an-existing-scoped-variable",level:2},{value:"Option 1: Directly edit using the UI",id:"option-1-directly-edit-using-the-ui",level:3},{value:"Option 2: Reupload the updated YAML file",id:"option-2-reupload-the-updated-yaml-file",level:3},{value:"Option 3: Edit through &#39;Environments&#39; tab",id:"option-3-edit-through-environments-tab",level:3},{value:"How to Use a Scoped Variable",id:"how-to-use-a-scoped-variable",level:2},{value:"List of Predefined Variables",id:"list-of-predefined-variables",level:2}];function c(e){const t={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",img:"img",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"using-scoped-variables-in-devtron",children:"Using Scoped Variables in Devtron"})}),"\n",(0,s.jsx)(t.h2,{id:"introduction",children:"Introduction"}),"\n",(0,s.jsx)(t.p,{children:"In Devtron, many configuration values such as a database name, memory limit, or service endpoint may need to be used in multiple places. Instead of entering the same value repeatedly, you can store it in a scoped variable."}),"\n",(0,s.jsx)(t.p,{children:"A scoped variable (key-value pair) allows you to define a value once and reuse it. The value of the variable will depend on the scopes mentioned below:"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Category"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.strong,{children:"Global"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Variable value will be universally same throughout Devtron."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.strong,{children:"Cluster"})}),(0,s.jsxs)(t.td,{style:{textAlign:"left"},children:["Variable value might differ for each Kubernetes cluster. ",(0,s.jsxs)("a",{href:"https://devtron.ai/pricing",target:"_blank",children:[" ",(0,s.jsx)("img",{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/elements/EnterpriseTag.svg",alt:"Enterprise Feature",className:"enterprise-badge-img"})]})]})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.strong,{children:"Environment"})}),(0,s.jsxs)(t.td,{style:{textAlign:"left"},children:["Variable value might differ for each environment within a cluster, e.g., staging, dev, prod. ",(0,s.jsx)("a",{href:"https://devtron.ai/pricing",children:(0,s.jsx)("img",{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/elements/EnterpriseTag.svg",className:"enterprise-badge-img"})})]})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.strong,{children:"Application"})}),(0,s.jsxs)(t.td,{style:{textAlign:"left"},children:["Variable value might differ for each application. ",(0,s.jsx)("a",{href:"https://devtron.ai/pricing",children:(0,s.jsx)("img",{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/elements/EnterpriseTag.svg",className:"enterprise-badge-img"})})]})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.strong,{children:"Environment + Application"})}),(0,s.jsxs)(t.td,{style:{textAlign:"left"},children:["Variable value might differ for each application on a specific environment. ",(0,s.jsx)("a",{href:"https://devtron.ai/pricing",children:(0,s.jsx)("img",{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/elements/EnterpriseTag.svg",className:"enterprise-badge-img"})})]})]})]})]}),"\n",(0,s.jsxs)(t.p,{children:["For example, you can create a variable named ",(0,s.jsx)(t.code,{children:"db_host"})," to store the database host URL and set its value to ",(0,s.jsx)(t.code,{children:"https://dev.company.com/mydb"})," for development environment, and for production environment you can set its value to ",(0,s.jsx)(t.code,{children:"https://prod.company.com/mydb"}),", at the time of deployment, Devtron will automatically choose the correct value based on the environment."]}),"\n",(0,s.jsx)(t.p,{children:"The table below illustrates how Devtron uses scoped variables defined for different scopes"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Scope"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Variable"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Values"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Global"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"DB_NAME"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"central-db"})})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Cluster"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"DB_NAME"}),(0,s.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,s.jsx)(t.strong,{children:"AWS EKS (Cluster):"})," ",(0,s.jsx)(t.code,{children:"eks-db"})," ",(0,s.jsx)("br",{})," ",(0,s.jsx)(t.strong,{children:"GKE (Cluster):"})," ",(0,s.jsx)(t.code,{children:"gke-db"})]})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Environment"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"DB_NAME"}),(0,s.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,s.jsx)(t.strong,{children:"Dev (Environment):"})," ",(0,s.jsx)(t.code,{children:"dev-db"})," ",(0,s.jsx)("br",{})," ",(0,s.jsx)(t.strong,{children:"Prod (Environment):"})," ",(0,s.jsx)(t.code,{children:"prod-db"})]})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Application"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"DB_NAME"}),(0,s.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,s.jsx)(t.strong,{children:"App1 (Application):"})," ",(0,s.jsx)(t.code,{children:"app1-db"})," ",(0,s.jsx)("br",{})," ",(0,s.jsx)(t.strong,{children:"App2 (Application):"})," ",(0,s.jsx)(t.code,{children:"app2-db"})]})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Env + App"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"DB_NAME"}),(0,s.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,s.jsx)(t.strong,{children:"Dev + App1:"})," ",(0,s.jsx)(t.code,{children:"dev-app1-db"})," ",(0,s.jsx)("br",{})," ",(0,s.jsx)(t.strong,{children:"Prod + App2:"})," ",(0,s.jsx)(t.code,{children:"prod-app2-db"})]})]})]})]}),"\n",(0,s.jsx)(t.h3,{id:"precedence-of-scoped-variables",children:"Precedence of Scoped Variables"}),"\n",(0,s.jsx)(t.p,{children:"If the same variable is defined at more than one scope, Devtron resolves the value based on the following precedence order:"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Precedence Order"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Scope"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"1 (Highest)"}),(0,s.jsxs)(t.td,{style:{textAlign:"left"},children:["Environment + Application ",(0,s.jsx)("a",{href:"https://devtron.ai/pricing",children:(0,s.jsx)("img",{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/elements/EnterpriseTag.svg",className:"enterprise-badge-img"})})]})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"2"}),(0,s.jsxs)(t.td,{style:{textAlign:"left"},children:["Application ",(0,s.jsx)("a",{href:"https://devtron.ai/pricing",children:(0,s.jsx)("img",{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/elements/EnterpriseTag.svg",className:"enterprise-badge-img"})})]})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"3"}),(0,s.jsxs)(t.td,{style:{textAlign:"left"},children:["Environment ",(0,s.jsx)("a",{href:"https://devtron.ai/pricing",children:(0,s.jsx)("img",{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/elements/EnterpriseTag.svg",className:"enterprise-badge-img"})})]})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"4"}),(0,s.jsxs)(t.td,{style:{textAlign:"left"},children:["Cluster ",(0,s.jsx)("a",{href:"https://devtron.ai/pricing",children:(0,s.jsx)("img",{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/elements/EnterpriseTag.svg",className:"enterprise-badge-img"})})]})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"5 (Lowest)"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Global"})]})]})]}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Environment + App:"})," This is the most specific scope, and it will take precedence over all other scopes. For example, the value of ",(0,s.jsx)(t.code,{children:"DB_Name"})," variable for the ",(0,s.jsx)(t.code,{children:"app1"})," application in the ",(0,s.jsx)(t.code,{children:"dev"})," environment would be ",(0,s.jsx)(t.code,{children:"dev-app1-db"}),", even though there is a global ",(0,s.jsx)(t.code,{children:"DB_Name"})," variable set to ",(0,s.jsx)(t.code,{children:"central-db"}),". If a variable value for this scope is not defined, the ",(0,s.jsx)(t.strong,{children:"App"})," scope will be checked."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Application:"})," This is the next most specific scope, and it will take precedence over the ",(0,s.jsx)(t.code,{children:"Environment"}),", ",(0,s.jsx)(t.code,{children:"Cluster"}),", and ",(0,s.jsx)(t.code,{children:"Global"})," scopes. For example, the value of ",(0,s.jsx)(t.code,{children:"DB_Name"})," variable for the ",(0,s.jsx)(t.code,{children:"app1"})," application would be ",(0,s.jsx)(t.code,{children:"app1-db"}),", even though the value of ",(0,s.jsx)(t.code,{children:"DB_Name"})," exists in lower scopes. If a variable value for this scope is not defined, the ",(0,s.jsx)(t.strong,{children:"Environment"})," scope will be checked."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Environment:"})," This is the next most specific scope, and it will take precedence over the ",(0,s.jsx)(t.code,{children:"Cluster"})," and ",(0,s.jsx)(t.code,{children:"Global"})," scopes. For example, the value of ",(0,s.jsx)(t.code,{children:"DB_Name"})," variable in the ",(0,s.jsx)(t.code,{children:"prod"})," environment would be ",(0,s.jsx)(t.code,{children:"prod-db"}),", even though the value of ",(0,s.jsx)(t.code,{children:"DB_Name"})," exists in lower scopes. If a variable value for this scope is not defined, the ",(0,s.jsx)(t.strong,{children:"Cluster"})," scope will be checked."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Cluster:"})," This is the next most specific scope, and it will take precedence over the ",(0,s.jsx)(t.code,{children:"Global"})," scope. For example, the value of ",(0,s.jsx)(t.code,{children:"DB_Name"})," variable in the ",(0,s.jsx)(t.code,{children:"GKE"})," cluster would be ",(0,s.jsx)(t.code,{children:"gke-db"}),", even though there is a global ",(0,s.jsx)(t.code,{children:"DB_Name"})," variable set to ",(0,s.jsx)(t.code,{children:"central-db"}),". If a variable value for this scope is not defined, the ",(0,s.jsx)(t.strong,{children:"Global"})," scope will be checked."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Global:"})," This is the least specific scope, and it will only be used if no variable values are found in other higher scopes. The value of ",(0,s.jsx)(t.code,{children:"DB_Name"})," variable would be ",(0,s.jsx)(t.code,{children:"central-db"}),"."]}),"\n"]}),"\n",(0,s.jsx)(t.h3,{id:"advantages-of-using-scoped-variables",children:"Advantages of using scoped variables"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Reduces repeatability"}),": Configuration management team can centrally maintain the static data."]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Simplifies bulk edits"}),": All the places that use a scoped variable, get updated when you change the value of the variable without requiring manual edits. If the scoped variable is being used in ",(0,s.jsx)(t.strong,{children:"Deployment Template"}),", ",(0,s.jsx)(t.strong,{children:"ConfigMap"}),", ",(0,s.jsx)(t.strong,{children:"Secret"}),", or ",(0,s.jsx)(t.strong,{children:"Job"})," the actual value will be resolved and propagated upon next trigger."]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Keeps data secure"}),": You can mark a variable as sensitive, so its value is hidden in the UI, reducing the risk of misuse or leakage. Refer ",(0,s.jsx)(t.a,{href:"#how-to-define-a-scoped-variable",children:"How to Define a Scoped Variable"})," to learn more."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h2,{id:"how-to-define-a-scoped-variable",children:"How to Define a Scoped Variable"}),"\n",(0,s.jsx)(t.admonition,{title:"Who can Perform this Action?",type:"caution",children:(0,s.jsx)(t.p,{children:"Only super admins can define scoped variables."})}),"\n",(0,s.jsx)(t.p,{children:"In Devtron, you can define scoped variables by using a YAML template. It will contain a schema for defining the scoped variables."}),"\n",(0,s.jsx)(t.p,{children:"Depending on your use case, you can do either one of the following:"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Action"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.strong,{children:"Download the YAML Template and define variables from scratch"})}),(0,s.jsxs)(t.td,{style:{textAlign:"left"},children:["In case you are defining the Scoped Variables for the first time:",(0,s.jsxs)("ol",{children:[(0,s.jsxs)("li",{children:[" ",(0,s.jsx)(t.a,{href:"#download-the-template",children:"Download the YAML template"})," to your local system."]}),(0,s.jsxs)("li",{children:[" ",(0,s.jsx)(t.a,{href:"#enter-the-values",children:"Define your variables"})]}),(0,s.jsxs)("li",{children:[" ",(0,s.jsx)(t.a,{href:"#upload-the-template",children:"Upload it back to the Devtron"})]})]})]})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.strong,{children:"Edit the existing saved YAML configuration"})}),(0,s.jsxs)(t.td,{style:{textAlign:"left"},children:["If you wish to add, update or delete the existing scoped variables, you can edit the existing saved YAML configuration using any of the following methods:",(0,s.jsxs)("ul",{children:[(0,s.jsx)("li",{children:"Edit using the in-built UI Editor."}),(0,s.jsx)("li",{children:" You can download the existing saved configuration as a YAML file in your local system and can modify it in your preferred local editor and then upload the file to implement changes."})]})]})]})]})]}),"\n",(0,s.jsx)(t.h3,{id:"download-the-template",children:"Download the Template"}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:["From the left sidebar, go to ",(0,s.jsx)(t.strong,{children:"Application Management"})," \u2192 ",(0,s.jsx)(t.strong,{children:"Configurations"})," \u2192 ",(0,s.jsx)(t.strong,{children:"Scoped Variables"})]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:["Click ",(0,s.jsx)(t.strong,{children:"Download template"}),"."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/global-configurations/scoped-variables/template-downloader.jpg",alt:"Figure 1: Downloading the Template"})}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"Open the downloaded template using any code editor (say VS Code)."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(t.h3,{id:"enter-the-values",children:"Enter the Values"}),"\n",(0,s.jsx)(t.p,{children:"The YAML file contains key-value pairs that follow the below schema:"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Field"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Type"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"apiVersion"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"string"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"The API version of the resource (comes pre-filled)"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"kind"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"string"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"The kind of resource (i.e. Variable, comes pre-filled)"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"spec"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"object"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"The complete specification object containing all the variables"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"spec.name"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"string"}),(0,s.jsxs)(t.td,{style:{textAlign:"left"},children:["Unique name of the variable, e.g. ",(0,s.jsx)(t.em,{children:"DB_URL"})]})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"spec.shortDescription"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"string"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"A short description of the variable (up to 120 characters)"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"spec.notes"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"string"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Additional details about the variable (will not be shown on UI)"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"spec.isSensitive"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"boolean"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Whether the variable value is confidential (will not be shown on UI if true)"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"spec.values"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"array"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"The complete values object containing all the variable values as per context"})]})]})]}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"spec.values"})," array further contains the following elements:"]}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Field"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Type"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"category"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"string"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"The context, e.g., Global, Cluster, Application, Env, ApplicationEnv"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"value"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"string"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"The value of the variable"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"selectors"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"object"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"A set of selectors that restrict the scope of the variable"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"selectors.attributeSelectors"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"object"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"A map of attribute selectors to values"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"selectors.attributeSelectors.<selector_key>"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"string"}),(0,s.jsxs)(t.td,{style:{textAlign:"left"},children:["The key of the attribute selector, e.g., ",(0,s.jsx)(t.strong,{children:"ApplicationName"}),", ",(0,s.jsx)(t.strong,{children:"EnvName"}),", ",(0,s.jsx)(t.strong,{children:"ClusterName"})]})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"selectors.attributeSelectors.<selector_value>"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"string"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"The value of the attribute selector"})]})]})]}),"\n",(0,s.jsx)(t.p,{children:"Here's a truncated template containing the specification of two variables for your understanding:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-yaml",children:"apiVersion: devtron.ai/v1beta1\nkind: Variable\nspec:\n\n# First example of a variable\n  - name: DB_URL\n    shortDescription: My application's customers are stored\n    notes: The DB is a MySQL DB running version 7.0. The DB contains confidential\n      information.\n    isSensitive: true\n    values:\n      - category: Global\n        value: mysql.example.com\n\n# Second example of a variable\n  - name: DB_Name\n    shortDescription: My database name to recognize the DB\n    notes: NA\n    isSensitive: false\n    values:\n      - category: Global\n        value: Devtron\n      - category: ApplicationEnv\n        value: app1-p\n        selectors:\n          attributeSelectors:\n            ApplicationName: MyFirstApplication\n            EnvName: prod\n"})}),"\n",(0,s.jsx)(t.h3,{id:"upload-the-template",children:"Upload the Template"}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"Once you save the YAML file, go back to the screen where you downloaded the template."}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:["Click ",(0,s.jsx)(t.strong,{children:"Upload file to add"}),", to upload your saved YAML file."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/global-configurations/scoped-variables/file-uploader.jpg",alt:"Figure 2: Uploading the Template"})}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:["The content of the file will be uploaded for you to review and edit. Click ",(0,s.jsx)(t.strong,{children:"Review Changes"}),"."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/global-configurations/scoped-variables/file-preview.jpg",alt:"Figure 3: Reviewing the YAML file"})}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:["You may check the changes between the last saved file and the current one before clicking ",(0,s.jsx)(t.strong,{children:"Save"}),"."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/global-configurations/scoped-variables/save.jpg",alt:"Figure 4: Saving the file"})}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:["Click the ",(0,s.jsx)(t.strong,{children:"Variable List"})," tab to view the variables. Check the ",(0,s.jsx)(t.a,{href:"#how-to-use-a-scoped-variable",children:"How to Use a Scoped Variable"})," section to know more."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/global-configurations/scoped-variables/variable-list.jpg",alt:"Figure 5: List of Variables"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsxs)(t.h2,{id:"defining-yaml-values-in-scoped-variables-",children:["Defining YAML values in scoped variables ",(0,s.jsx)("a",{href:"https://devtron.ai/pricing",children:(0,s.jsx)("img",{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/elements/EnterpriseTag.svg",className:"enterprise-badge-img"})})]}),"\n",(0,s.jsx)(t.p,{children:"In Devtron, Scoped variables usually store simple values like strings or numbers, for example, if you want to connect multiple applications to the same SonarQube server, you can define a variable for its endpoint URL once instead of entering it everywhere."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-yaml",children:"SONAR_ENDPOINT: https://sonarqube.yourcompany.com\n"})}),"\n",(0,s.jsx)(t.p,{children:"But, in some cases, you may need to define more detailed configuration in a scoped variable, such as autoscaling configuration or resource configuration. You can achieve this by defining a YAML snippet as the value of a scoped variable."}),"\n",(0,s.jsxs)(t.p,{children:["Defining YAML snippets as the value of a scoped variable will help you to reuse YAML configuration across multiple applications or environments. Scoped variables with YAML snippets can be changed based on the context (",(0,s.jsx)(t.code,{children:"category"}),") such as ",(0,s.jsx)(t.strong,{children:"Global"}),", ",(0,s.jsx)(t.strong,{children:"Cluster"}),", ",(0,s.jsx)(t.strong,{children:"Environment"}),", ",(0,s.jsx)(t.strong,{children:"Application"}),", ",(0,s.jsx)(t.strong,{children:"Environment+Application"}),"."]}),"\n",(0,s.jsx)(t.p,{children:"Here's a truncated template containing the specification of one scoped variable with a YAML snippet as its value defined for different contexts for your understanding:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-yaml",children:"apiVersion: devtron.ai/v1beta1\nkind: Variable\nspec:\n  - notes: Resource Configuration\n    shortDescription: Scoped variable with YAML snippet\n    isSensitive: false\n    name: resources # Defining name for the variable.\n    values:\n      - category: Application\n        value:  # Insert the YAML configuration block with proper indentation\n          limits:\n            cpu: 100m\n            memory: 100Mi\n          requests:\n            cpu: 100m\n            memory: 100Mi\n        selectors:\n          attributeSelectors:\n            ApplicationName: banking-preprod\n      - category: Env # Defining the variable for an environment.\n        value: \n            limits:\n              cpu: 75m\n              memory: 75Mi\n            requests:\n              cpu: 50m\n              memory: 50Mi\n        selectors:\n          attributeSelectors:\n            EnvName: devtron-demo # Specifying the environment\n      - category: Env # Defining variable's values for another environment\n        value: \n          limits:\n            cpu: 200m\n            memory: 200Mi\n          requests:\n            cpu: 100m\n            memory: 100Mi\n        selectors:\n          attributeSelectors:\n            EnvName: banking # Specifying another environment name.\n      - category: Global # Defining Variable's Values for global context.\n        value:\n          limits:\n            cpu: 50m\n            memory: 50Mi\n          requests:\n            cpu: 50m\n            memory: 50Mi\n"})}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h2,{id:"how-to-edit-an-existing-scoped-variable",children:"How to Edit an Existing Scoped Variable"}),"\n",(0,s.jsx)(t.admonition,{title:"Who can Perform this Action?",type:"caution",children:(0,s.jsx)(t.p,{children:"Only super admins can edit scoped variables"})}),"\n",(0,s.jsx)(t.p,{children:"Only a super-admin can edit existing scoped variables."}),"\n",(0,s.jsx)(t.h3,{id:"option-1-directly-edit-using-the-ui",children:"Option 1: Directly edit using the UI"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/global-configurations/scoped-variables/edit.jpg",alt:"Figure 6: Editing from UI"})}),"\n",(0,s.jsx)(t.h3,{id:"option-2-reupload-the-updated-yaml-file",children:"Option 2: Reupload the updated YAML file"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/global-configurations/scoped-variables/reupload.jpg",alt:"Figure 7: Re-uploading New File"})}),"\n",(0,s.jsx)(t.admonition,{title:"Note",type:"caution",children:(0,s.jsx)(t.p,{children:"Re-uploading the YAML file will replace the previous file, so any variable that existed in the previous file but not in the latest one will be lost"})}),"\n",(0,s.jsx)(t.h3,{id:"option-3-edit-through-environments-tab",children:"Option 3: Edit through 'Environments' tab"}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.strong,{children:"Environments"})," tab allows you to view and edit scoped variable values for individual environments."]}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsxs)(t.li,{children:["Go to the ",(0,s.jsx)(t.strong,{children:"Environments"})," tab; you will see a list of all environments and how many scoped variables are defined for each of them."]}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/global-configurations/scoped-variables/scoped-variable-env-tab.jpg",alt:"Figure 8: Navigating to 'Environment' tab"})}),"\n",(0,s.jsxs)(t.ol,{start:"2",children:["\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"Click the preferred environment name to view or edit."}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"You can edit the variables using the GUI or YAML mode."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/global-configurations/scoped-variables/scoped-variable-edit-scoped-variable.jpg",alt:"Figure 9a: Editing in GUI Mode"})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/global-configurations/scoped-variables/scoped-variable-edit-scoped-variable-yaml.jpg",alt:"Figure 9b: Editing in YAML Mode"})}),"\n",(0,s.jsx)(t.admonition,{title:"Note",type:"info",children:(0,s.jsx)(t.p,{children:"Any changes you made through this method will also update the saved YAML configuration."})}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h2,{id:"how-to-use-a-scoped-variable",children:"How to Use a Scoped Variable"}),"\n",(0,s.jsx)(t.admonition,{title:"Who can Perform this Action?",type:"caution",children:(0,s.jsx)(t.p,{children:"Users need to have Admin permission or above (along with access to the environment and application) to enable to use a scoped variable."})}),"\n",(0,s.jsx)(t.p,{children:"Once a variable is defined, it can be used by your authorized users on Devtron. A scoped variable widget would appear only on the screens that support its usage."}),"\n",(0,s.jsxs)(t.p,{children:["Currently, the widget is shown only on the following screens in ",(0,s.jsx)(t.a,{href:"/docs/user-guide/creating-application/",children:"App Configuration"}),":"]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"Workflow Editor \u2192 Edit build pipeline \u2192 Pre-build stage (tab)"}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"Workflow Editor \u2192 Edit build pipeline \u2192 Post-build stage (tab)"}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"Workflow Editor \u2192 Edit deployment pipeline \u2192 Post-Deployment stage (tab)"}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"Workflow Editor \u2192 Edit deployment pipeline \u2192 Post-Deployment stage (tab)"}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"Deployment Template"}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"ConfigMaps"}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"Secrets"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/global-configurations/scoped-variables/widget1.jpg",alt:"Figure 10: Unexpanded Widget"})}),"\n",(0,s.jsx)(t.p,{children:"To use a scoped variable, click on the floating widget; a list of variables will be visible."}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/global-configurations/scoped-variables/widget-expanded.jpg",alt:"Figure 11: Expanded Widget"})}),"\n",(0,s.jsx)(t.p,{children:"Use the copy button to copy a relevant variable of your choice."}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/global-configurations/scoped-variables/display-value.jpg",alt:"Figure 12: Copying a Variable"})}),"\n",(0,s.jsxs)(t.p,{children:["It would appear in the following format upon pasting it within an input field: ",(0,s.jsx)(t.code,{children:"@{{variable-name}}"}),"."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/global-configurations/scoped-variables/paste-value.jpg",alt:"Figure 13: Pasting a Variable"})}),"\n",(0,s.jsxs)(t.p,{children:["In case you are using a scoped variable in deployment template, you need to encapsulate it in double quotes i.e., ",(0,s.jsx)(t.code,{children:'"@{{variable-name}}"'})]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/global-configurations/scoped-variables/scoped-variable-using-in-deployment-template.jpg",alt:"Figure 14a: Using Scoped Variable in Deployment Template"})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/global-configurations/scoped-variables/scoped-variable-dry-run.jpg",alt:"Figure 14b: Performing a Dry Run"})}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Note:"})," Ignore the red underline while using a scoped variable in the deployment template."]}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h2,{id:"list-of-predefined-variables",children:"List of Predefined Variables"}),"\n",(0,s.jsx)(t.p,{children:"There are some system variables that exist by default in Devtron that you can readily use if needed:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"DEVTRON_NAMESPACE"}),": Provides name of the ",(0,s.jsx)(t.a,{href:"/docs/reference/glossary#namespace",children:"namespace"})]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"DEVTRON_CLUSTER_NAME"}),": Provides name of the ",(0,s.jsx)(t.a,{href:"/docs/user-guide/global-configurations/cluster-and-environments",children:"cluster"})," configured on Devtron"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"DEVTRON_ENV_NAME"}),": Provides name of the ",(0,s.jsx)(t.a,{href:"/docs/reference/glossary#environment",children:"environment"})]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"DEVTRON_IMAGE_TAG"}),": Provides ",(0,s.jsx)(t.a,{href:"https://docs.docker.com/engine/reference/commandline/tag/",children:"image tag"})," associated with the ",(0,s.jsx)(t.a,{href:"/docs/reference/glossary#image",children:"container image"})]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"DEVTRON_IMAGE"}),": Provides full image path of the container image, e.g., ",(0,s.jsx)(t.code,{children:"gcr.io/k8s-minikube/kicbase:v0.0.39"})]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"DEVTRON_APP_NAME"}),": Provides name of the ",(0,s.jsx)(t.a,{href:"/docs/user-guide/create-application",children:"application on Devtron"})]}),"\n"]}),"\n",(0,s.jsxs)(t.admonition,{type:"info",children:[(0,s.jsx)(t.mdxAdmonitionTitle,{}),(0,s.jsx)(t.p,{children:"Currently, these variables do not appear in the scoped variable widget, but you may use them."})]})]})}function h(e={}){const{wrapper:t}={...(0,l.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>a});var i=n(6540);const s={},l=i.createContext(s);function r(e){const t=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),i.createElement(l.Provider,{value:t},e.children)}}}]);