"use strict";(self.webpackChunkdocdevtron=self.webpackChunkdocdevtron||[]).push([[5404],{7739:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>s,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"user-guide/ai-recommendations/runbook","title":"Runbooks","description":"AI automatically generates a runbook corresponding to the recommendation actions identified. Since you always have the choice to approve or reject the suggested runbook. Moreover, the user always  option to manually create additional runbooks.","source":"@site/docs/user-guide/ai-recommendations/runbook.md","sourceDirName":"user-guide/ai-recommendations","slug":"/user-guide/ai-recommendations/runbook","permalink":"/docs/user-guide/ai-recommendations/runbook","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{}}');var o=r(4848),i=r(8453);const s={},a="Runbooks",d={},l=[{value:"Approval Types",id:"approval-types",level:2},{value:"Approve Options",id:"approve-options",level:3},{value:"Reject Options",id:"reject-options",level:3},{value:"Editing a Runbook Spec",id:"editing-a-runbook-spec",level:2},{value:"Audit Logs",id:"audit-logs",level:2},{value:"Extras",id:"extras",level:2},{value:"Create a Runbook",id:"create-a-runbook",level:3}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"runbooks",children:"Runbooks"})}),"\n",(0,o.jsxs)(n.p,{children:["AI automatically generates a runbook corresponding to the recommendation actions identified. Since you always have the choice to approve or reject the suggested runbook. Moreover, the user always  option to manually ",(0,o.jsx)(n.a,{href:"#create-a-runbook",children:"create additional runbooks"}),"."]}),"\n",(0,o.jsx)(n.admonition,{title:"Example of Remediation Action",type:"info",children:(0,o.jsx)(n.p,{children:"When AI recommends a cost optimization such as reducing memory allocation, the linked runbook carries out that change. For example, scaling down a pod\u2019s memory limit from 6 Gi to 3 Gi across selected clusters."})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"approval-types",children:"Approval Types"}),"\n",(0,o.jsx)(n.h3,{id:"approve-options",children:"Approve Options"}),"\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:"Option"}),(0,o.jsx)(n.th,{children:"Behavior"}),(0,o.jsx)(n.th,{children:"Example Use Case"})]})}),(0,o.jsxs)(n.tbody,{children:[(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.strong,{children:"Forever"})}),(0,o.jsx)(n.td,{children:"All future runs of this runbook stands indefinitely auto-approved."}),(0,o.jsx)(n.td,{children:"For dev or sandbox clusters where downtime or failed runs are acceptable and you want continuous savings."})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.strong,{children:"Till date & time"})}),(0,o.jsx)(n.td,{children:"Auto-approves until a specific expiry date and time."}),(0,o.jsx)(n.td,{children:"During a maintenance window or before a critical demo, so changes are applied automatically until that period ends."})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.strong,{children:"For duration"})}),(0,o.jsx)(n.td,{children:"Auto-approves temporarily for a set number of hours."}),(0,o.jsx)(n.td,{children:"For short tests or limited-time fixes, such as approving remediation for the next few hours."})]})]})]}),"\n",(0,o.jsx)(n.h3,{id:"reject-options",children:"Reject Options"}),"\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:"Option"}),(0,o.jsx)(n.th,{children:"Behavior"}),(0,o.jsx)(n.th,{children:"Example Use Case"})]})}),(0,o.jsxs)(n.tbody,{children:[(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.strong,{children:"Forever"})}),(0,o.jsx)(n.td,{children:"Blocks all future runs of this runbook permanently."}),(0,o.jsx)(n.td,{children:"For production clusters where any automated remediation is risky or unwanted."})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.strong,{children:"Till date & time"})}),(0,o.jsx)(n.td,{children:"Rejects runs until a specific expiry date and time."}),(0,o.jsx)(n.td,{children:"When you want the cluster to stay stable (e.g., during a product demo or release)."})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.strong,{children:"For duration"})}),(0,o.jsx)(n.td,{children:"Rejects runs temporarily for a few hours."}),(0,o.jsx)(n.td,{children:"To pause remediation during high-traffic periods or while verifying manual changes."})]})]})]}),"\n",(0,o.jsx)(n.admonition,{title:"What happends when the approval or rejection period expires?",type:"note",children:(0,o.jsxs)(n.p,{children:["When any approval or rejection period ends, the runbook status resets to ",(0,o.jsx)(n.strong,{children:"Action Pending"}),". The user is expected to take an action again."]})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"editing-a-runbook-spec",children:"Editing a Runbook Spec"}),"\n",(0,o.jsxs)(n.p,{children:["Select ",(0,o.jsx)(n.strong,{children:"Edit Spec"})," to modify the YAML definition."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:'apiVersion: devtron.ai/v1\nkind: Runbook\nmetadata:\n  name: update-resource-limits\n  description: Update CPU/memory limits for workloads.\nspec:\n  steps:\n    - name: patch-resource-limits\n      type: kubectl-patch\n      params:\n        cluster: "{{ .cluster }}"\n        namespace: "{{ .namespace }}"\n        resourceType: Deployment\n        resourceName: "{{ .resourceName }}"\n        patch:\n          spec:\n            template:\n              spec:\n                containers:\n                  - name: "{{ .containerName }}"\n                    resources:\n                      requests:\n                        cpu: "{{ .cpuRequest }}"\n                        memory: "{{ .memoryRequest }}"\n                      limits:\n                        cpu: "{{ .cpuLimit }}"\n                        memory: "{{ .memoryLimit }}"\n'})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"audit-logs",children:"Audit Logs"}),"\n",(0,o.jsx)(n.p,{children:"Every Runbook logs:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Created / Updated / Approved / Rejected actions"}),"\n",(0,o.jsx)(n.li,{children:"User, timestamp, and resource"}),"\n",(0,o.jsx)(n.li,{children:"Full JSON payload for traceability"}),"\n"]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"extras",children:"Extras"}),"\n",(0,o.jsx)(n.h3,{id:"create-a-runbook",children:"Create a Runbook"}),"\n",(0,o.jsxs)(n.admonition,{type:"info",children:[(0,o.jsx)(n.mdxAdmonitionTitle,{}),(0,o.jsx)(n.p,{children:"Follow this section only if you wish to create a runbook different than the one generated by AI."})]}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["From the left navigation, go to ",(0,o.jsx)(n.strong,{children:"AI Recommendations"})," \u2192 ",(0,o.jsx)(n.strong,{children:"Runbooks"}),"."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Click ",(0,o.jsx)(n.strong,{children:"Create Runbook"}),"."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Enter the name and description for your runbook:"}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Name"})," - update-resource-limits"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Description"})," - Updates CPU and memory limits for workloads."]}),"\n"]}),"\n",(0,o.jsxs)(n.ol,{start:"4",children:["\n",(0,o.jsxs)(n.li,{children:["Click ",(0,o.jsx)(n.strong,{children:"Create Runbook"}),"."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>s,x:()=>a});var t=r(6540);const o={},i=t.createContext(o);function s(e){const n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);